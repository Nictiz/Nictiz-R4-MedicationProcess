<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="nl-core-MedicationAdministration2" />
  <url value="http://nictiz.nl/fhir/StructureDefinition/nl-core-MedicationAdministration2" />
  <name value="NlcoreMedicationAdministration2" />
  <title value="nl core MedicationAdministration2" />
  <status value="draft" />
  <publisher value="Nictiz" />
  <contact>
    <name value="Nictiz" />
    <telecom>
      <system value="email" />
      <value value="info@nictiz.nl" />
      <use value="work" />
    </telecom>
  </contact>
  <description value="Medication administration is the registration of the individual administrations of the medicine on the patient by the administrator (e.g. a nurse or patient themselves), in relation to the entered agreements." />
  <purpose value="A derived profile from [zib-MedicationAdministration2](http://nictiz.nl/fhir/StructureDefinition/zib-MedicationAdministration2) to provide a version better suited for implementation purposes. This profile augments the base profile with elements found in the various use cases that have adopted the zib." />
  <copyright value="Copyright and related rights waived via CC0, https://creativecommons.org/publicdomain/zero/1.0/. This does not apply to information from third parties, for example a medical terminology system. The implementer alone is responsible for identifying and obtaining any necessary licenses or authorizations to utilize third party IP in connection with the specification or otherwise." />
  <fhirVersion value="4.0.1" />
  <mapping>
    <identity value="Medication-Process-v9-2-0-0" />
    <uri value="https://decor.nictiz.nl/pub/medicatieproces/mp-html-20220402T205710/ds-2.16.840.1.113883.2.4.3.11.60.20.77.1.4-2022-01-05T132845.html" />
    <name value="MP9 v2.0.0" />
  </mapping>
  <kind value="resource" />
  <abstract value="false" />
  <type value="MedicationAdministration" />
  <baseDefinition value="http://nictiz.nl/fhir/StructureDefinition/zib-MedicationAdministration2" />
  <derivation value="constraint" />
  <differential>
    <element id="MedicationAdministration">
      <path value="MedicationAdministration" />
      <alias value="nl-core-MedicationAdministration2" />
    </element>
    <element id="MedicationAdministration.extension">
      <path value="MedicationAdministration.extension" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="url" />
        </discriminator>
        <rules value="open" />
      </slicing>
      <min value="0" />
    </element>
    <element id="MedicationAdministration.extension:pharmaceuticalTreatmentIdentifier">
      <path value="MedicationAdministration.extension" />
      <sliceName value="pharmaceuticalTreatmentIdentifier" />
      <min value="0" />
      <type>
        <code value="Extension" />
        <profile value="http://nictiz.nl/fhir/StructureDefinition/ext-PharmaceuticalTreatment.Identifier" />
      </type>
    </element>
    <element id="MedicationAdministration.extension:injectionPatchSite">
      <path value="MedicationAdministration.extension" />
      <sliceName value="injectionPatchSite" />
      <min value="0" />
      <type>
        <code value="Extension" />
        <profile value="http://nictiz.nl/fhir/StructureDefinition/ext-MedicationAdministration2.InjectionPatchSite" />
      </type>
      <isModifier value="false" />
    </element>
    <element id="MedicationAdministration.identifier">
      <path value="MedicationAdministration.identifier" />
      <short value="Identification" />
      <alias value="Identificatie" />
      <mapping>
        <identity value="Medication-Process-v9-2-0-0" />
        <map value="mp-dataelement920-447" />
        <comment value="Identification" />
      </mapping>
    </element>
    <element id="MedicationAdministration.category.extension">
      <path value="MedicationAdministration.category.extension" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="url" />
        </discriminator>
        <rules value="open" />
      </slicing>
      <min value="0" />
    </element>
    <element id="MedicationAdministration.category.extension:category">
      <path value="MedicationAdministration.category.extension" />
      <sliceName value="category" />
      <min value="0" />
      <type>
        <code value="Extension" />
        <profile value="http://nictiz.nl/fhir/StructureDefinition/ext-MedicationAdministration.Category" />
      </type>
    </element>
    <element id="MedicationAdministration.medication[x]:medicationReference">
      <path value="MedicationAdministration.medication[x]" />
      <sliceName value="medicationReference" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Medication" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-PharmaceuticalProduct" />
      </type>
    </element>
    <element id="MedicationAdministration.subject">
      <path value="MedicationAdministration.subject" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Patient" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Group" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-Patient" />
      </type>
    </element>
    <element id="MedicationAdministration.context">
      <path value="MedicationAdministration.context" />
      <short value="RelationContact / RelationEpisodeOfCare" />
      <comment value="The 'ExtContextEpisodeOfCare' extension is used to capture a reference to a related EpisodeOfCare if both a reference to an Encounter and EpisodeOfCare need to be exchanged. This this `context` element will then contain the reference to the Encounter resource." />
      <alias value="RelatieContact" />
      <alias value="RelatieZorgepisode" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Encounter" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/EpisodeOfCare" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-Encounter" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-EpisodeOfCare" />
      </type>
      <mapping>
        <identity value="Medication-Process-v9-2-0-0" />
        <map value="mp-dataelement920-1353" />
        <comment value="RelationContact" />
      </mapping>
      <mapping>
        <identity value="Medication-Process-v9-2-0-0" />
        <map value="mp-dataelement920-1355" />
        <comment value="RelationEpisodeOfCare" />
      </mapping>
    </element>
    <element id="MedicationAdministration.context.extension">
      <path value="MedicationAdministration.context.extension" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="url" />
        </discriminator>
        <rules value="open" />
      </slicing>
      <min value="0" />
    </element>
    <element id="MedicationAdministration.context.extension:relatedEpisodeOfCare">
      <path value="MedicationAdministration.context.extension" />
      <sliceName value="relatedEpisodeOfCare" />
      <min value="0" />
      <max value="1" />
      <type>
        <code value="Extension" />
        <profile value="http://nictiz.nl/fhir/StructureDefinition/ext-Context-EpisodeOfCare" />
      </type>
    </element>
    <element id="MedicationAdministration.context.extension:relatedEpisodeOfCare.value[x]">
      <path value="MedicationAdministration.context.extension.value[x]" />
      <short value="RelatedEpisodeOfCare" />
      <alias value="RelatieZorgepisode" />
      <mapping>
        <identity value="Medication-Process-v9-2-0-0" />
        <map value="mp-dataelement920-1355" />
        <comment value="RelationEpisodeOfCare" />
      </mapping>
    </element>
    <element id="MedicationAdministration.supportingInformation:administrationAgreement">
      <path value="MedicationAdministration.supportingInformation" />
      <sliceName value="administrationAgreement" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-AdministrationAgreement" />
      </type>
    </element>
    <element id="MedicationAdministration.performer.actor">
      <path value="MedicationAdministration.performer.actor" />
      <type>
        <code value="Reference" />
        <profile value="http://nictiz.nl/fhir/StructureDefinition/pattern-NlCoreHealthProfessionalReference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Practitioner" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/PractitionerRole" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Patient" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/RelatedPerson" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Device" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-Patient" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-HealthProfessional-PractitionerRole" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-ContactPerson" />
      </type>
    </element>
    <element id="MedicationAdministration.request">
      <path value="MedicationAdministration.request" />
      <short value="MedicationAgreement / RelationVariableDosingRegimen" />
      <definition value="Medication agreement or variable-dosing regimen on which this administration is based." />
      <comment value="The extension ext-ResourceCategory can be used to discriminate the reference between the concepts MedicationAgreement (NL-CM:9.13.23170) and RelationVariableDosingRegimen (mp-dataelement920-1325) without the need of resolving the reference." />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/MedicationRequest" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-MedicationAgreement" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-VariableDosingRegimen" />
      </type>
      <mapping>
        <identity value="Medication-Process-v9-2-0-0" />
        <map value="mp-dataelement920-1325" />
        <comment value="RelationVariableDosingRegimen" />
      </mapping>
    </element>
    <element id="MedicationAdministration.request.extension">
      <path value="MedicationAdministration.request.extension" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="url" />
        </discriminator>
        <rules value="open" />
      </slicing>
      <min value="0" />
    </element>
    <element id="MedicationAdministration.request.extension:resourceCategory">
      <path value="MedicationAdministration.request.extension" />
      <sliceName value="resourceCategory" />
      <min value="0" />
      <type>
        <code value="Extension" />
        <profile value="http://nictiz.nl/fhir/StructureDefinition/ext-ResourceCategory" />
      </type>
    </element>
    <element id="MedicationAdministration.dosage.extension">
      <path value="MedicationAdministration.dosage.extension" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="url" />
        </discriminator>
        <rules value="open" />
      </slicing>
      <min value="0" />
    </element>
    <element id="MedicationAdministration.dosage.extension:administeringSpeedRange">
      <path value="MedicationAdministration.dosage.extension" />
      <sliceName value="administeringSpeedRange" />
      <min value="0" />
    </element>
    <element id="MedicationAdministration.dosage.extension:administeringSpeedRange.value[x]">
      <path value="MedicationAdministration.dosage.extension.value[x]" />
      <comment value="Variable administering speeds are _not_ part of the MedicationAdministration building block within the MedicationProcess information standard, hence this extension should not be used in that context. Instead, every change in administering speed should result in a new MedicationAdministration instance." />
    </element>
    <element id="MedicationAdministration.dosage.extension:agreedAmount">
      <path value="MedicationAdministration.dosage.extension" />
      <sliceName value="agreedAmount" />
      <min value="0" />
      <type>
        <code value="Extension" />
        <profile value="http://nictiz.nl/fhir/StructureDefinition/ext-MedicationAdministration2.AgreedAmount" />
      </type>
    </element>
    <element id="MedicationAdministration.dosage.site.text">
      <path value="MedicationAdministration.dosage.site.text" />
      <short value="PrickPatchLocation" />
      <definition value="The body site where an injection has been administered or an band-aid has been placed." />
      <alias value="PrikPlakLocatie" />
      <mapping>
        <identity value="Medication-Process-v9-2-0-0" />
        <map value="mp-dataelement920-702" />
        <comment value="PrickPatchLocation" />
      </mapping>
    </element>
  </differential>
</StructureDefinition>